{"remainingRequest":"C:\\Users\\web\\Desktop\\水果\\vue_app\\vue_app_0\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\web\\Desktop\\水果\\vue_app\\vue_app_0\\src\\components\\shuiguo\\Login.vue?vue&type=style&index=0&scope=true&lang=css","dependencies":[{"path":"C:\\Users\\web\\Desktop\\水果\\vue_app\\vue_app_0\\src\\components\\shuiguo\\Login.vue","mtime":1571904768129},{"path":"C:\\Users\\web\\Desktop\\水果\\vue_app\\vue_app_0\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\web\\Desktop\\水果\\vue_app\\vue_app_0\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907988000},{"path":"C:\\Users\\web\\Desktop\\水果\\vue_app\\vue_app_0\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\web\\Desktop\\水果\\vue_app\\vue_app_0\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\web\\Desktop\\水果\\vue_app\\vue_app_0\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n* {\n  margin: 0;\n  padding: 0;\n}\n.phone {\n  margin-top: 40px;\n}\n#c3 {\n  width: 120px;\n  height: 50px;\n}\n#delu {\n  background: #ddffdd;\n  width: 40%;\n  margin-left: 30%;\n  margin-top: 20px;\n}\n",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src\\components\\shuiguo","sourcesContent":["<template>\r\n  <div>\r\n    <v-Ddd></v-Ddd>\r\n    <table></table>\r\n    <div>\r\n      <mt-field\r\n        label=\"手机号\"\r\n        placeholder=\"请输入手机号\"\r\n        v-model=\"phone\"\r\n        class=\"phone\"\r\n      ></mt-field>\r\n      <div>\r\n        <mt-field label=\"验证码\" placeholder=\"请输入验证码\" v-model=\"inputyzm\"\r\n          ><canvas id=\"c3\" width=\"170\" height=\"48\" @click=\"change()\"></canvas\r\n        ></mt-field>\r\n      </div>\r\n      <mt-button id=\"delu\" @click=\"login\">登陆</mt-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  import vDdd from \"./Ddd.vue\";\r\n  export default {\r\n    data() {\r\n      return {\r\n        phone: [],\r\n        yzm: [],\r\n        inputyzm: []\r\n      };\r\n    },\r\n    mounted() {\r\n      this.change();\r\n    },\r\n    methods: {\r\n      change() {\r\n        var c3 = document.getElementById(\"c3\");\r\n        var ctx = c3.getContext(\"2d\");\r\n        var a = Math.floor(Math.random() * 10);\r\n        var b = Math.floor(Math.random() * 10);\r\n        var c = Math.floor(Math.random() * 10);\r\n        var d = Math.floor(Math.random() * 10);\r\n        this.yzm = \"\" + a + b + c + d;\r\n        console.log(this.yzm);\r\n        //随机背景颜色\r\n        var r = Math.floor(Math.random() * 255);\r\n        var g = Math.floor(Math.random() * 255);\r\n        var q = Math.floor(Math.random() * 255);\r\n        c3.style.background = `rgba(` + r + `,` + g + `,` + q + `,` + `0.6)`; // console.log(abcd); // console.log(a);\r\n        ctx.font = \"40px Arial\";\r\n        ctx.clearRect(0, 0, 999, 999);\r\n        ctx.fillText(this.yzm, 60, 40);\r\n      },\r\n      login() {\r\n        //功能：完成用户登录操作\r\n        // 1.获取用户输入的电话\r\n        var phone = this.phone; // 2.创建正则表达式\r\n        var reg = /^[1][3,4,5,7,8][0-9]{9}$/; // 3.验证用户手机\r\n        if (!reg.test(phone)) {\r\n          // 3.1 验证不成功提示消息\r\n          this.$messagebox(\"手机号格式不正确\");\r\n          return;\r\n        }\r\n        if (this.inputyzm !== this.yzm) {\r\n          this.$messagebox(\"验证码输入错误,请重新\");\r\n          return;\r\n        }\r\n        //创建url请求服务器\r\n        var url = \"login\";\r\n        //请求参数为phone\r\n        var obj = { phone: phone };\r\n        //向服务器请求\r\n        this.axios.get(url, { params: obj }).then(res => {\r\n          console.log(res);\r\n          if (res.data.code == \"1\") {\r\n            //如果成功，跳转主页面\r\n            sessionStorage.uid = res.data.data[0].id;\r\n            console.log(\"登陆成功\", sessionStorage.uid);\r\n            this.$messagebox(\"登录成功\");\r\n            this.$router.push(\"/Home\");\r\n          } else if (res.data.code == \"-1\") {\r\n            this.$messagebox(\"账号不存在\");\r\n            this.$router.push(\"/Reg\");\r\n          }\r\n        });\r\n      }\r\n    },\r\n    components: {\r\n      vDdd\r\n    }\r\n  };\r\n</script>\r\n<style scope>\r\n  * {\r\n    margin: 0;\r\n    padding: 0;\r\n  }\r\n  .phone {\r\n    margin-top: 40px;\r\n  }\r\n  #c3 {\r\n    width: 120px;\r\n    height: 50px;\r\n  }\r\n  #delu {\r\n    background: #ddffdd;\r\n    width: 40%;\r\n    margin-left: 30%;\r\n    margin-top: 20px;\r\n  }\r\n</style>\r\n"]}]}